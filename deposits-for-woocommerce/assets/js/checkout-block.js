!function () { "use strict"; const n = (n, e = "info") => { window.baynaBlocksData?.debug_mode && console.log(`[CHECKOUT-BLOCKS-FREE] [${e}] ${n}`) }, e = n => { if (!n || 0 === n) return "$0.00"; try { const e = window.baynaBlocksData?.currency; return e && window.Intl ? new Intl.NumberFormat("en-US", { style: "currency", currency: e.code || "USD", minimumFractionDigits: e.precision || 2 }).format(parseFloat(n)) : "$" + parseFloat(n).toFixed(2) } catch (e) { return "$" + parseFloat(n || 0).toFixed(2) } }, t = n => { if (!n || !Array.isArray(n)) return; document.querySelectorAll(".wc-block-components-order-summary-item").forEach(((t, o) => { const a = n[o]; if (!a || !a.has_deposit) return; const c = t.querySelector(".bayna-checkout-deposit-info"); c && c.remove(); const s = t.querySelector(".wc-block-components-order-summary-item__description"); if (!s) return; const i = document.createElement("div"); i.className = "bayna-checkout-deposit-info", i.innerHTML = `\n                <div class="bayna-checkout-deposit-row">\n                    <span class="bayna-checkout-deposit-label">Deposit:</span>\n                    <span class="bayna-checkout-deposit-amount">${e(a.deposit_amount)}</span>\n                </div>\n                <div class="bayna-checkout-due-row">\n                    <span class="bayna-checkout-due-label">Due:</span>\n                    <span class="bayna-checkout-due-amount">${e(a.due_amount)}</span>\n                </div>\n            `; const r = s.querySelector(".wc-block-components-product-metadata"); r ? r.insertAdjacentElement("afterend", i) : s.appendChild(i) })) }, o = () => { if (!window.wp?.plugins || !window.wc?.blocksCheckout) return void setTimeout(o, 100); n("Initializing checkout blocks"); const { registerPlugin: a } = window.wp.plugins, { ExperimentalOrderMeta: c } = window.wc.blocksCheckout, { __: s } = window.wp.i18n, { useEffect: i, useState: r, createElement: d } = window.wp.element, m = () => { const [o, a] = r(null), [c, m] = r(!0); return i((() => { (async () => { try { const n = await fetch(window.baynaBlocksData?.ajax_url, { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: new URLSearchParams({ action: "bayna_get_cart_deposit_data", nonce: window.baynaBlocksData?.ajax_nonce || "" }) }), e = await n.json(); e.success && e.data && (a(e.data), e.data.items_details && setTimeout((() => { t(e.data.items_details) }), 100)) } catch (e) { n("Error fetching deposit data: " + e.message, "error") } finally { m(!1) } })(); const e = new MutationObserver((() => { o?.items_details && setTimeout((() => { t(o.items_details) }), 100) })), c = document.querySelector(".wc-block-components-order-summary"); return c && e.observe(c, { childList: !0, subtree: !0 }), () => { e.disconnect() } }), [o]), o?.has_deposit_items ? d("div", { className: "bayna-checkout-deposit-summary" }, [d("div", { key: "summary", className: "bayna-checkout-breakdown" }, [d("div", { key: "deposit-row", className: "bayna-checkout-summary-row wc-block-components-totals-item" }, [d("span", { key: "deposit-label" }, window.baynaBlocksData?.deposit_labels?.deposit_amount || s("Total Deposit:", "deposits-for-woocommerce")), d("span", { key: "deposit-amount", className: "wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value" }, e(o.deposit_total))]), d("div", { key: "due-row", className: "bayna-checkout-summary-row wc-block-components-totals-item" }, [d("span", { key: "due-label" }, window.baynaBlocksData?.deposit_labels?.due_payment || s("Total Due:", "deposits-for-woocommerce")), d("span", { key: "due-amount", className: "wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value" }, e(o.due_total))])])]) : null }; try { a("bayna-checkout-deposit-summary", { render: () => d(c, {}, d(m)), scope: "woocommerce-checkout" }), n("Checkout plugin registered successfully") } catch (e) { n("Error registering checkout plugin: " + e.message, "error") } if (window.wp?.hooks) { const { addFilter: e } = window.wp.hooks; e("woocommerce_checkout_before_processing", "bayna-deposits-free", (e => (window.baynaDepositData?.has_deposit_items && (e.extensions = e.extensions || {}, e.extensions["bayna-deposits"] = { has_deposit_items: !0, deposit_amount: window.baynaDepositData.deposit_total || 0, due_amount: window.baynaDepositData.due_total || 0, original_total: window.baynaDepositData.original_total || 0 }, n("Added deposit data to checkout processing")), e))) } }; if ("loading" === document.readyState ? document.addEventListener("DOMContentLoaded", o) : o(), !document.getElementById("bayna-checkout-styles-free")) { const n = document.createElement("style"); n.id = "bayna-checkout-styles-free", n.textContent = "\n            .bayna-checkout-deposit-summary {\n               \n            }\n            \n            .bayna-checkout-deposit-summary h3 {\n               \n               font-size: 16px;\n        font-weight: 700;\n        text-transform: uppercase;\n                padding-bottom: 10px;\n                font-weight: 600;\n            }\n            \n             .bayna-checkout-breakdown {\n               \n                margin-bottom: 10px;\n             \n            }\n             .woocommerce-checkout .bayna-checkout-deposit-summary  {\n            \n                padding:16px;\n\n            }\n            .bayna-checkout-summary-row {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 10px;\n                padding: 6px 0;\n            }\n            \n            .bayna-checkout-summary-row:last-of-type {\n                border-bottom: none;\n                margin-bottom: 0;\n            }\n            \n            .bayna-checkout-summary-total {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-top: 14px;\n                padding-top: 14px;\n                border-top: 2px solid #0073aa;\n                font-weight: bold;\n                font-size: 1.05em;\n            }\n            \n            .bayna-checkout-info {\n                background: #e8f4f8;\n                padding: 12px;\n                border-radius: 6px;\n            }\n            \n            .bayna-checkout-info p {\n                margin: 0;\n                font-size: 0.9em;\n                color: #2c3e50;\n                font-style: italic;\n            }\n            \n            .bayna-checkout-deposit-info {\n                margin: 9px 0;\n                padding:  5px 10px;\n                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n                border: 1px solid #dee2e6;\n                border-radius: 6px;\n                font-size: 0.9em;\n               \n            }\n            \n            .bayna-checkout-deposit-row,\n            .bayna-checkout-due-row {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 4px;\n            }\n            \n            .bayna-checkout-due-row {\n                margin-bottom: 0;\n            }\n            \n            .bayna-checkout-deposit-label,\n            .bayna-checkout-due-label {\n                color: #495057;\n                font-weight: 600;\n                font-size: 0.85em;\n                text-transform: uppercase;\n                letter-spacing: 0.5px;\n            }\n            \n            .bayna-checkout-deposit-amount {\n                color: #28a745;\n                font-weight: 700;\n                font-size: 0.95em;\n            }\n            \n            .bayna-checkout-due-amount {\n                color: #6c757d;\n                font-weight: 600;\n                font-size: 0.95em;\n            }\n            \n            .bayna-checkout-loading {\n                text-align: center;\n                padding: 20px;\n                color: #666;\n                font-style: italic;\n            }\n            \n            @media (max-width: 768px) {\n                .bayna-checkout-deposit-summary {\n                    padding: 14px;\n                    margin: 16px 0;\n                }\n                \n                .bayna-checkout-summary-row, \n                .bayna-checkout-summary-total {\n                    flex-direction: column;\n                    align-items: flex-start;\n                    gap: 4px;\n                }\n                \n                .bayna-checkout-deposit-row,\n                .bayna-checkout-due-row {\n                    flex-direction: column;\n                    align-items: flex-start;\n                    gap: 2px;\n                }\n            }\n        ", document.head.appendChild(n) } n("Checkout deposit blocks script loaded") }();